<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>News Demo - 6f5c58f12f0c45efb15e10182915aa86</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      button:disabled {
    opacity: 0.5;  
    cursor: not-allowed; 
    pointer-events: none; 
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">News App</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a
                class="nav-link active"
                id="homeButton"
                aria-current="page"
                href="#"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" id="sportsButton" href="#">Sports</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="weatherButton" href="#">Weather</a>
            </li>
          </ul>
          <form class="d-flex" role="search">
            <input
              id="searchInput"
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button id="search" class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>
    <div class="container">
      <h1>Welcome to the News App (<span id="resultCount"></span> Results)</h1>
      <div class="row content">
        <!-- <div class="card my-4 mx-2" style="width: 18rem">
          <img src="..." class="card my-4 mx-2-img-top" alt="..." />
          <div class="card my-4 mx-2-body">
            <h5 class="card my-4 mx-2-title">Card title</h5>
            <p class="card my-4 mx-2-text">
              Some quick example text to build on the card my-4 mx-2 title and
              make up the bulk of the card my-4 mx-2's content.
            </p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div> -->
      </div>
      <div class="d-flex justify-content-around my-4">
        <button class="btn btn-primary" id="prev">&lt;Previous Page</button>
        <button class="btn btn-primary" id="next">Next Page &gt;</button>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
      let currentquery = "home";
      let currentPage = 1;
      let TotalPages = 0;
      // console.log("Hello");
      const fetchNews = async (page, q) => {
        console.log(`Fetching News for ${q} of page ${page}...`);
        var url =
          "https://newsapi.org/v2/everything?" +
          "q=" +
          q +
          // "from=2023-01-20&" +
          // "to=2024-12-10&" +
          "&language=en&" +
          "pageSize=20&" +
          "page=" +
          page +
          "&sortBy=popularity&" +
          "apiKey=6f5c58f12f0c45efb15e10182915aa86";

        let req = new Request(url);
        let a = await fetch(req);
        let response = await a.json();
        // console.log(JSON.stringify(response));
        // let response = {
        //   status: "ok",
        //   totalResults: 41841,
        //   articles: [
        //     {
        //       source: { id: null, name: "Yahoo Entertainment" },
        //       author: "Amy Skorheim",
        //       title:
        //         "Black Friday Apple deals 2024: The best Apple sales on iPads, AirPods, Apple Watches and MacBooks",
        //       description:
        //         "Apple devices have a few things in common: they’re well-designed, solidly built and easily connect with one another. But chances are, if it bears the Apple logo, it’s not cheap. That’s why promos like Black Friday are always worth checking out if you’re in th…",
        //       url: "https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_5b50f93c-f2e5-4f39-87c2-8667512a5599",
        //       urlToImage: null,
        //       publishedAt: "2024-11-19T16:51:43Z",
        //       content:
        //         "If you click 'Accept all', we and our partners, including 237 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]",
        //     },
        //     {
        //       source: { id: null, name: "Yahoo Entertainment" },
        //       author: "Amy Skorheim",
        //       title:
        //         "Black Friday Apple deals 2024: The best Apple sales on iPads, AirPods, Apple Watches, MacBooks and AirTags",
        //       description:
        //         "Between the ”Let Loose” iPad event\r\n in May, the iPhone 16 “It’s Glowtime” event\r\n in September and the Mac Week non-event\r\n in October, Apple has been busy releasing a slew of new iPads, Macs, Apple Watches, MacBooks and more for 2024. If you’ve been waiting…",
        //       url: "https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_eaa3e088-3fab-41b9-a1e1-0b8620ef792b",
        //       urlToImage: null,
        //       publishedAt: "2024-11-21T15:48:13Z",
        //       content:
        //         "If you click 'Accept all', we and our partners, including 237 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]",
        //     },
        //     {
        //       source: { id: null, name: "Yahoo Entertainment" },
        //       author: "Kris Holt",
        //       title:
        //         "This Apple Black Friday deal gets you $50 off the Apple Watch Series 10 on Amazon",
        //       description:
        //         "Apple devices are some of the most sought after this time of year and, believe it or not, you can find some decent Black Friday deals on them if you know where to look. At the moment, one such deal is on the Apple Watch Series 10: Apple’s newest wearable is o…",
        //       url: "https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_937c2d2a-8313-402e-b7a8-47098aa035d4",
        //       urlToImage: null,
        //       publishedAt: "2024-11-18T15:31:26Z",
        //       content:
        //         "If you click 'Accept all', we and our partners, including 237 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-11-26T14:11:49Z",
        //       content: "[Removed]",
        //     },
        //     {
        //       source: { id: "wired", name: "Wired" },
        //       author: "Brenda Stolyar",
        //       title:
        //         "21 Cyber Monday Deals on Apple iPads, MacBooks, More Still Available",
        //       description:
        //         "Are Apple's gadgets on your holiday gift lists this year? You're in luck. Nab these Cyber Monday Apple deals for discounted MacBooks, Apple Watches, iPads, and AirPods.",
        //       url: "https://www.wired.com/story/cyber-monday-apple-deals-2024/",
        //       urlToImage:
        //         "https://media.wired.com/photos/674769026811d4146e6fa13b/191:100/w_1280,c_limit/cyber-monday-apple-deals.png",
        //       publishedAt: "2024-12-02T11:27:19Z",
        //       content:
        //         "if you've been eyeing a pricey MacBook recently, now is the time to hit that buy button. Apple Cyber Monday deals are already here and several WIRED-approved gadgets are on salefrom iPads and MacBook… [+10675 chars]",
        //     },
        //     {
        //       source: { id: null, name: "Yahoo Entertainment" },
        //       author: "Steve Dent",
        //       title:
        //         "Brazilian judge overturns ruling that forced Apple to open up its Store",
        //       description:
        //         "Last week, Brazil's antitrust regulator CADE ordered Apple to allow users to download apps and make purchases from outside its App Store, with a 20-day deadline and fines for not complying. Now, a Brazilian federal court has overturned that injunction, ruling…",
        //       url: "https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_7919bf3d-75e3-4d2d-b677-5128a6ce1567",
        //       urlToImage: null,
        //       publishedAt: "2024-12-06T13:00:39Z",
        //       content:
        //         "If you click 'Accept all', we and our partners, including 237 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]",
        //     },
        //     {
        //       source: { id: null, name: "Yahoo Entertainment" },
        //       author: "Sarah Fielding",
        //       title: "Brazil demands Apple open up the App Store...or else",
        //       description:
        //         "Little by little, countries around the world are taking steps to change how Apple's App Store functions. The most recent development comes from Brazil, where the nation's antitrust regulator Conselho Administrativo de Defesa Economica (CADE) on Monday issued …",
        //       url: "https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_d563176c-7aab-40cf-9421-0936a5f2757e",
        //       urlToImage: null,
        //       publishedAt: "2024-11-26T14:30:16Z",
        //       content:
        //         "If you click 'Accept all', we and our partners, including 237 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-12-03T16:29:08Z",
        //       content: "[Removed]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-12-01T21:08:53Z",
        //       content: "[Removed]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-11-13T20:29:40Z",
        //       content: "[Removed]",
        //     },
        //     {
        //       source: { id: "the-verge", name: "The Verge" },
        //       author: "Andrew Webster",
        //       title:
        //         "Severance’s season 2 trailer teases answers and raises strange new questions",
        //       description:
        //         "Apple has released a new trailer for season 2 of the Apple TV Plus series Severance, which starts streaming in January.",
        //       url: "https://www.theverge.com/2024/12/7/24314837/severance-season-2-trailer-goats-apple-tv-plus",
        //       urlToImage:
        //         "https://cdn.vox-cdn.com/thumbor/a9QpzJhnBrMQyEukpZ0ps5CYcQA=/0x0:3840x1593/1200x628/filters:focal(1920x797:1921x798)/cdn.vox-cdn.com/uploads/chorus_asset/file/25776430/Severance_Photo_020104.jpg",
        //       publishedAt: "2024-12-07T19:00:00Z",
        //       content:
        //         "Severances season 2 trailer teases answers and raises strange new questions\r\nSeverances season 2 trailer teases answers and raises strange new questions\r\n / The workplace horror series returns to App… [+1818 chars]",
        //     },
        //     {
        //       source: { id: "wired", name: "Wired" },
        //       author: "Steven Levy",
        //       title: "The Inside Story of Apple Intelligence",
        //       description:
        //         "Apple’s leaders claim the company wasn’t late to generative AI, but instead following what has become its familiar playbook: try to be the best, not the first.",
        //       url: "https://www.wired.com/story/plaintext-the-inside-story-of-apple-intelligence/",
        //       urlToImage:
        //         "https://media.wired.com/photos/6751ff446576e040c5caaac1/191:100/w_1280,c_limit/Plaintext-Apple-Intelligence-Business-2156429550.jpg",
        //       publishedAt: "2024-12-06T16:39:06Z",
        //       content:
        //         "Google, Meta, and Microsoft, as well as startups like OpenAI and Anthropic, all had well-developed strategies for generative AI by the time Apple finally announced its own push this June. Conventiona… [+3008 chars]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-11-25T15:02:23Z",
        //       content: "[Removed]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-11-26T15:51:24Z",
        //       content: "[Removed]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-11-21T16:22:18Z",
        //       content: "[Removed]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-11-28T13:43:13Z",
        //       content: "[Removed]",
        //     },
        //     {
        //       source: { id: null, name: "Yahoo Entertainment" },
        //       author: "Kris Holt",
        //       title:
        //         "Apple secretly included quantum dot tech in the M4 MacBook Pro's display",
        //       description:
        //         "Apple's latest M4-powered MacBook Pro is a pretty stellar laptop. We gave it a score of 92 in our review, due in part to its great screen. The display is brighter this time around, peaking at 1,000 nits for SDR (standard dynamic range) content and 1,600 nits …",
        //       url: "https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_72825322-6e56-4f1d-b58d-d363d6837f0d",
        //       urlToImage: null,
        //       publishedAt: "2024-11-15T17:34:24Z",
        //       content:
        //         "If you click 'Accept all', we and our partners, including 237 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]",
        //     },
        //     {
        //       source: { id: null, name: "Yahoo Entertainment" },
        //       author: "Amy Skorheim",
        //       title:
        //         "The best Cyber Monday Apple deals on AirPods, iPads, MacBooks and AirTags we could find",
        //       description:
        //         "If you’ve been waiting for the right time to buy a new iPad, AirPods or Mac, Cyber Monday is your chance. Starting about a week before Black Friday, we began seeing all-time lows and first-time discounts on nearly everything Apple released this year and nearl…",
        //       url: "https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_7ea7f655-c914-4b39-a0d5-45c8da8bee3e",
        //       urlToImage: null,
        //       publishedAt: "2024-12-02T05:10:35Z",
        //       content:
        //         "If you click 'Accept all', we and our partners, including 237 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]",
        //     },
        //     {
        //       source: { id: null, name: "Yahoo Entertainment" },
        //       author: "Cheyenne MacDonald",
        //       title:
        //         "Apple Vision Pro could soon work with PlayStation VR2 controllers",
        //       description:
        //         "Apple and Sony have quietly been working on bringing PlayStation VR2 controller support to the Apple Vision Pro, Mark Gurman reports in the Power On\r\n newsletter. Gaming isn’t exactly the Vision Pro’s strong suit, thanks in part to the fact that it doesn’t su…",
        //       url: "https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_26af5f10-8e31-4194-b57c-a5917d557ad1",
        //       urlToImage: null,
        //       publishedAt: "2024-12-08T16:15:47Z",
        //       content:
        //         "If you click 'Accept all', we and our partners, including 237 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]",
        //     },
        //     {
        //       source: { id: null, name: "[Removed]" },
        //       author: null,
        //       title: "[Removed]",
        //       description: "[Removed]",
        //       url: "https://removed.com",
        //       urlToImage: null,
        //       publishedAt: "2024-11-20T13:30:27Z",
        //       content: "[Removed]",
        //     },
        //   ],
        // };

        let str = "";
        resultCount.innerHTML = response.totalResults;
        for (let item of response.articles) {
          str =
            str +
            ` <div class="card my-4 mx-2" style="width: 18rem">
          <img height="184" src="${
            item.urlToImage
          }" class="card my-4 mx-2-img-top" alt="..." />
          <div class="card my-4 mx-2-body">
            <h5 class="card my-4 mx-2-title">${item.title.slice(0, 23)}</h5>
            <p class="card my-4 mx-2-text">${item.description.slice(0, 148)}
            </p>
            <a href="${
              item.url
            }" target="_blank" class="btn btn-primary">Read Article</a>
          </div>
        </div>`;
        }
        TotalPages = (response.totalResults * 1) / 20;
        document.querySelector(".content").innerHTML = str;
        if (currentPage <= 1) {
          //prev.style.display = "none";
          // prev.style.filter = "blur(5px)";
          document.getElementById("prev").disabled=true;
         } 
         else
         document.getElementById("prev").disabled=false; 
         //prev.style.display = "inline-block";

        if (currentPage >= TotalPages) {
          // next.style.display = "none";
          document.getElementById("next").disabled=true;
        } else 
        document.getElementById("next").disabled=false;
        //next.style.display = "inline-block";
      };
      fetchNews(currentPage, currentquery);
      search.addEventListener("click", (e) => {
        e.preventDefault();
        let query = searchInput.value;
        currentquery = query;
        fetchNews(currentPage, currentquery);
      });
      next.addEventListener("click", (e) => {
        e.preventDefault();
        currentPage = currentPage + 1;
        // console.log("is it working");
        fetchNews(currentPage, currentquery);
      });
      prev.addEventListener("click", (e) => {
        if (currentPage > 1) {
          e.preventDefault();
          currentPage = currentPage - 1;
          fetchNews(currentPage, currentquery);
        }
      });
      document.getElementById("homeButton").addEventListener("click", () => {
        currentquery = "home";
        currentPage = 1;
        fetchNews(currentPage, currentquery);
      });
      document.getElementById("sportsButton").addEventListener("click", () => {
        currentquery = "sports";
        currentPage = 1;
        fetchNews(currentPage, currentquery);
      });

      document.getElementById("weatherButton").addEventListener("click", () => {
        currentquery = "weather";
        currentPage = 1;
        fetchNews(currentPage, currentquery);
      });
    </script>
  </body>
</html>